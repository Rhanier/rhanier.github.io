<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sistema de gerenciamento de fazenda de gados com mapas de pastos">
    <title>Gerenciador de Fazenda de Gados</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    
    <!-- CSS Customizado -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- CABEÃ‡ALHO -->
        <header>
            <h1>ğŸ„ Gerenciador Fazenda Gados</h1>
            <nav class="nav-buttons" role="navigation">
                <button class="btn btn-primary" onclick="showSection('cadastro')" aria-label="Cadastrar novo gado">â• Novo Gado</button>
                <button class="btn btn-secondary" onclick="showSection('visualizacao')" aria-label="Visualizar gados cadastrados">ğŸ‘ï¸ Visualizar Gados</button>
                <button class="btn btn-secondary" onclick="showSection('mapa')" aria-label="Ver mapa de pastos">ğŸ—ºï¸ Mapa Pastos</button>
            </nav>
        </header>

        <div class="content">
            <!-- SEÃ‡ÃƒO CADASTRO -->
            <section id="cadastro" class="section active" aria-labelledby="cadastro-heading">
                <h2 id="cadastro-heading">ğŸ“ Cadastrar Novo Gado</h2>
                <div class="success-message" id="successMessage" role="alert" aria-live="polite">âœ“ Gado cadastrado com sucesso!</div>
                
                <form id="cattleForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="cattleId">ID/NÃºmero do Gado *</label>
                            <input type="text" id="cattleId" name="cattleId" placeholder="Ex: VACA-001" required aria-required="true">
                            <small style="color: #999; margin-top: 5px; display: block;">Auto-gerado, mas pode ser editado</small>
                        </div>
                        <div class="form-group">
                            <label for="cattleRace">RaÃ§a *</label>
                            <input type="text" id="cattleRace" name="cattleRace" value="Nelore" required aria-required="true">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="cattleWeight">Peso (kg) *</label>
                            <!-- <input type="number" id="cattleWeight" name="cattleWeight" placeholder="Ex: 500" min="0" step="1" required aria-required="true"> -->
                            <input type="number" id="cattleWeight" name="cattleWeight" placeholder="Ex: 500" min="0" step="1" value="100">
                        </div>
                        <div class="form-group">
                            <label for="cattleAge">Idade (meses)</label>
                            <input type="number" id="cattleAge" name="cattleAge" placeholder="Ex: 24" min="0" value="">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="cattlePhoto">Foto do Gado ğŸ“·</label>
                        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                            <button type="button" class="btn-submit" style="flex: 1; padding: 10px;" onclick="captureCattlePhoto()">ğŸ“± Tirar Foto</button>
                            <button type="button" class="btn-secondary" style="flex: 1; padding: 10px; border-radius: 8px;" onclick="uploadCattlePhoto()">ğŸ“‚ Enviar Arquivo</button>
                        </div>
                        <input type="file" id="cattlePhoto" name="cattlePhoto" accept="image/*" style="display: none;" aria-label="Selecionar foto do arquivo">
                        <input type="file" id="cattlePhotoCapture" name="cattlePhotoCapture" accept="image/*" capture="camera" style="display: none;" aria-label="Tirar foto com cÃ¢mera">
                        <div id="photoPreview" class="image-preview"></div>
                    </div>

                    <div class="form-group">
                        <label for="cattleComment">ObservaÃ§Ãµes</label>
                        <textarea id="cattleComment" name="cattleComment" placeholder="Adicione comentÃ¡rios sobre o gado..."></textarea>
                    </div>

                    <div class="button-group">
                        <button type="submit" class="btn-submit">ğŸ’¾ Cadastrar Gado</button>
                    </div>
                </form>
            </section>

            <!-- SEÃ‡ÃƒO VISUALIZAÃ‡ÃƒO -->
            <section id="visualizacao" class="section" aria-labelledby="visualizacao-heading">
                <h2 id="visualizacao-heading">ğŸ‘ï¸ Gados Cadastrados</h2>
                <div id="cattleContainer" class="cattle-grid" role="list">
                    <div class="empty-state">
                        <h3>Nenhum gado cadastrado ainda</h3>
                        <p>Comece adicionando seu primeiro gado na seÃ§Ã£o de cadastro</p>
                    </div>
                </div>
            </section>

            <!-- SEÃ‡ÃƒO MAPA -->
            <section id="mapa" class="section" aria-labelledby="mapa-heading">
                <h2 id="mapa-heading">ğŸ—ºï¸ Mapa de Pastos</h2>
                
                <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px; margin-bottom: 20px;">
                    <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; border-left: 4px solid #667eea;">
                        <h3 style="margin-top: 0; color: #333;">ğŸ“‹ Pastos Cadastrados</h3>
                        <div id="pasturesList" style="max-height: 400px; overflow-y: auto;" role="list">
                            <p style="color: #999; text-align: center;">Nenhum pasto cadastrado</p>
                        </div>
                    </div>

                    <div class="pasture-form">
                        <h3>Adicionar Novo Pasto</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="pastureName">Nome do Pasto *</label>
                                <input type="text" id="pastureName" placeholder="Ex: Pasto Norte" required aria-required="true">
                            </div>
                            <div class="form-group">
                                <label for="pastureArea">Ãrea (hectares)</label>
                                <input type="number" id="pastureArea" placeholder="Ex: 10" min="0" step="0.1">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>ğŸ“ Clique no mapa para adicionar pontos (mÃ­nimo 3 pontos para formar um polÃ­gono)</label>
                            <div style="background: #f0f0f0; padding: 10px; border-radius: 8px; margin-bottom: 10px;">
                                <p id="pointsCount" style="margin: 0; color: #666; font-size: 14px;">Pontos adicionados: 0</p>
                                <button type="button" class="btn-secondary" style="margin-top: 8px; width: 100%; border-radius: 8px; padding: 8px;" onclick="clearPasturePoints()">ğŸ”„ Limpar Pontos</button>
                            </div>
                        </div>
                        <button class="btn-submit" onclick="addPasture()">â• Adicionar Pasto</button>
                    </div>
                </div>

                <div id="map" role="application" aria-label="Mapa interativo de pastos"></div>

                <div class="legend">
                    <h3>Legenda</h3>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #90ee90;"></div>
                        <span>Pasto 1 (verde claro)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #428e45;"></div>
                        <span>Pasto 8 (verde mÃ©dio)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #1b5e20;"></div>
                        <span>Pasto 10 (verde escuro)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #2196F3;"></div>
                        <span>Ponto do Pasto</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #FFC107;"></div>
                        <span>Gado no Pasto</span>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- MODAL DETALHES -->
    <div id="detailModal" class="detail-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()" aria-label="Fechar modal">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    
    <!-- JavaScript Customizado -->
    <script src="script.js"></script>
</body>
</html>
